appId: com.bitqba.linkzonemanager
productName: Link Zone Manager
directories:
  output: dist
  buildResources: resources
files:
  - from: .
    filter:
      - package.json
      - app
      - main/logo*.png  # Include tray icons in build

# Configuración optimizada para Windows y macOS
compression: normal  # Reducir tiempo de compresión

# Configuración para Windows
win:
  icon: "resources/icon.ico"
  target:
    - target: "nsis"
      arch: ["x64"]  # Solo x64, eliminar ia32 para evitar errores
    - target: "portable"
      arch: ["x64"]
  
nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  deleteAppDataOnUninstall: false

# Configuración para macOS (Apple Silicon) - Fixed
mac:
  icon: "resources/icon.icns"
  category: "public.app-category.utilities"
  target:
    - target: "dmg"
      arch: ["arm64"]
    - target: "zip"
      arch: ["arm64"]
  hardenedRuntime: false
  gatekeeperAssess: false
  entitlements: null
  entitlementsInherit: null
  minimumSystemVersion: "11.0"

# Linux configuration - AppImage for universal compatibility
linux:
  icon: "resources/icon.png"
  category: "Utility"
  target:
    - target: "AppImage"
      arch: ["x64"]
  desktop:
    Name: "Link Zone Manager"
    Comment: "Manage your ETECSA LinkZone device"
    Categories: "Utility;Network;"
    StartupWMClass: "link-zone-manager"

dmg:
  title: "${productName} ${version}"
  icon: "resources/icon.icns"
  contents:
    - x: 130
      y: 220
    - x: 410
      y: 220
      type: "link"
      path: "/Applications"

# Configuración de publicación
publish:
  provider: github
  releaseType: release
